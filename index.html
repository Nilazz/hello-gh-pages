<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hello World</title>
  <style>
    :root {
      --bg: #ffffff;
      --text: #111827;
      --card: #f3f4f6;
      --accent: #2563eb;
      --accent-2: #1e40af;
    }
    [data-theme="dark"] {
      --bg: #0b1220;
      --text: #e6eef8;
      --card: #131826;
      --accent: #60a5fa;
      --accent-2: #1e3a8a;
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color: var(--text);
      transition: background .25s ease, color .25s ease;
    }

    .sr-only { position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

    .lewy-gorny-obrazek {
      position: absolute;
      top: 10px;
      left: 50px;
      width: 80px;
      height: auto;
      margin: 0;
      z-index: 10;
    }

    /* theme icon (top-right, left of hamburger) */
    .theme-toggle {
      position: fixed;
      top: 10px;
      right: 64px; /* left of hamburger (hamburger right:10px width ~44px + gap) */
      width: 44px;
      height: 44px;
      padding: 6px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: var(--card);
      color: var(--text);
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,0.06);
      cursor: pointer;
      z-index: 42;
    }
    .theme-toggle svg { width:22px; height:22px; display:block; }

    /* hamburger (top-right) */
    .hamburger {
      position: fixed;
      top: 10px;
      right: 10px;
      left: auto;
      width: 44px;
      height: 36px;
      padding: 6px;
      display: inline-flex;
      flex-direction: column;
      justify-content: space-between;
      background: transparent;
      border: none;
      cursor: pointer;
      z-index: 40;
    }
    .hamburger span {
      display: block;
      height: 3px;
      background: var(--text);
      border-radius: 3px;
      transition: transform .25s ease, opacity .25s ease;
    }
    .hamburger.open span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
    .hamburger.open span:nth-child(2) { opacity: 0; transform: scaleX(0); }
    .hamburger.open span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

    /* menu dropdown (right under hamburger) */
    .menu {
      position: fixed;
      top: 56px;
      right: 10px;
      background: var(--card);
      color: var(--text);
      border-radius: 10px;
      box-shadow: 0 6px 20px rgba(2,6,23,0.12);
      padding: 8px;
      display: none;
      flex-direction: column;
      gap: 6px;
      min-width: 140px;
      z-index: 39;
    }
    .menu.open { display: flex; }
    .menu button {
      background: transparent;
      border: none;
      color: var(--text);
      text-align: left;
      padding: 8px 10px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
    }
    .menu button:hover {
      background: rgba(0,0,0,0.04);
    }

    /* modal (login) */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(2,6,23,0.45);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 60;
      padding: 20px;
    }
    .modal-backdrop.open { display: flex; }
    .modal {
      background: var(--card);
      color: var(--text);
      width: 100%;
      max-width: 420px;
      border-radius: 12px;
      box-shadow: 0 12px 40px rgba(2,6,23,0.25);
      padding: 20px;
    }
    .modal h2 { margin: 0 0 12px 0; font-size: 18px; }
    .modal form { display: grid; gap: 10px; }
    .modal input[type="text"],
    .modal input[type="password"],
    .modal input[type="email"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.08);
      background: transparent;
      color: var(--text);
      outline: none;
      box-sizing: border-box;
    }
    .modal .modal-actions {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      margin-top: 6px;
      align-items: center;
    }
    .modal .links { display:flex; gap:8px; align-items:center; }
    .btn {
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
    }
    .btn-ghost {
      background: transparent;
      color: var(--text);
      border: 1px solid rgba(0,0,0,0.06);
    }
    .btn-primary {
      background: linear-gradient(180deg,var(--accent),var(--accent-2));
      color: #fff;
      box-shadow: 0 6px 18px rgba(37,99,235,0.16);
    }

    /* centered container with header + search */
    .center {
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 18px;
      padding: 20px;
      box-sizing: border-box;
    }

    /* search card */
    .search-wrap {
      width: min(720px, 90vw);
      display: flex;
      gap: 10px;
      align-items: center;
      background: var(--card);
      padding: 12px;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.06);
    }
    .search-wrap input[type="search"] {
      flex: 1;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,0.06);
      background: transparent;
      color: var(--text);
      outline: none;
      font-size: 16px;
    }
    .search-btn {
      background: linear-gradient(180deg,var(--accent),var(--accent-2));
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 6px 18px rgba(37,99,235,0.18);
      font-weight: 600;
      transition: transform .08s ease, box-shadow .12s ease, opacity .12s ease;
    }
    .search-btn:hover { transform: translateY(-1px); opacity: 0.98; }
    .search-btn:active { transform: translateY(0); box-shadow: 0 4px 12px rgba(37,99,235,0.14); }

    h1 { text-align: center; margin: 0; font-size: 28px; }
    p { text-align: center; margin: 0; color: rgba(17,24,39,0.7); }
    @media (max-width:520px) {
      .search-wrap { padding: 10px; gap: 8px; }
      .search-btn { padding: 9px 12px; }
      .lewy-gorny-obrazek { width: 56px; left: 46px; }
      .theme-toggle { right: 60px; } /* small adjustment on mobile */
    }
  </style>
</head>
<body>
  <img src="images/moj-obrazek.png" alt="Mój obrazek" class="lewy-gorny-obrazek" />

  <button class="theme-toggle" id="themeToggle" aria-label="Przełącz tryb" aria-pressed="false">
    <!-- svg will be controlled by JS -->
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M12 3v2M12 19v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
      <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.6" fill="currentColor"/>
    </svg>
  </button>

  <button class="hamburger" id="hamburger" aria-label="Menu" aria-expanded="false">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <div class="menu" id="menu" role="menu" aria-hidden="true">
    <button id="loginBtn" type="button" role="menuitem">Zaloguj</button>
    <button id="registerBtn" type="button" role="menuitem">Zarejestruj</button>
  </div>

  <main class="center">
    <h1>Wyszukiwarka</h1>

    <div class="search-wrap" role="search" aria-label="Wyszukiwarka">
      <input id="q" type="search" placeholder="Szukaj..." aria-label="Pole wyszukiwania" />
      <button id="searchBtn" class="search-btn" type="button">Szukaj</button>
    </div>
  </main>

  <!-- Login modal -->
  <div class="modal-backdrop" id="loginModal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document" aria-labelledby="loginTitle">
      <h2 id="loginTitle">Zaloguj się</h2>
      <form id="loginForm" autocomplete="off">
        <label for="loginUser">Email lub nazwa użytkownika</label>
        <input id="loginUser" name="username" type="text" placeholder="Email lub nazwa użytkownika" required />

        <label for="loginPass">Hasło</label>
        <input id="loginPass" name="password" type="password" placeholder="Hasło" required />

        <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
          <label style="display:flex;align-items:center;gap:8px;font-size:14px;">
            <input id="loginRemember" name="remember" type="checkbox" />
            <span>Zapamiętaj mnie</span>
          </label>
          <div class="links">
            <button type="button" class="btn btn-ghost" id="forgotBtn">Zapomniałeś hasła?</button>
          </div>
        </div>

        <div class="modal-actions">
          <div></div>
          <div>
            <button type="button" class="btn btn-ghost" id="loginCancel">Anuluj</button>
            <button type="submit" class="btn btn-primary">Zaloguj</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <script>
    // theme toggle with icon, persistence
    (function(){
      const root = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const lsKey = 'theme-preference';

      const svgSun = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 3v2M12 19v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.6" fill="currentColor"/></svg>';
      const svgMoon = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/></svg>';

      function applyTheme(t) {
        if (t === 'dark') {
          root.setAttribute('data-theme','dark');
          btn.innerHTML = svgMoon;
          btn.setAttribute('aria-pressed','true');
          btn.setAttribute('title','Tryb: ciemny');
        } else {
          root.removeAttribute('data-theme');
          btn.innerHTML = svgSun;
          btn.setAttribute('aria-pressed','false');
          btn.setAttribute('title','Tryb: jasny');
        }
      }

      const saved = localStorage.getItem(lsKey) || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      applyTheme(saved);

      btn.addEventListener('click', () => {
        const current = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
        const next = current === 'dark' ? 'light' : 'dark';
        applyTheme(next);
        localStorage.setItem(lsKey, next);
      });
    })();

    // simple search: open Google results in new tab
    (function(){
      const input = document.getElementById('q');
      const btn = document.getElementById('searchBtn');
      function doSearch() {
        const val = input.value.trim();
        if (!val) { input.focus(); return; }
        const url = 'https://www.google.com/search?q=' + encodeURIComponent(val);
        window.open(url, '_blank');
      }
      btn.addEventListener('click', doSearch);
      input.addEventListener('keydown', (e) => { if (e.key === 'Enter') doSearch(); });
    })();

    // hamburger toggles menu
    (function(){
      const ham = document.getElementById('hamburger');
      const menu = document.getElementById('menu');
      ham.addEventListener('click', (e) => {
        e.stopPropagation();
        ham.classList.toggle('open');
        const isOpen = ham.classList.contains('open');
        ham.setAttribute('aria-expanded', String(isOpen));
        menu.classList.toggle('open', isOpen);
        menu.setAttribute('aria-hidden', String(!isOpen));
      });
      // close menu on outside click or ESC
      document.addEventListener('click', (e) => {
        if (!menu.contains(e.target) && !ham.contains(e.target) && !document.getElementById('themeToggle').contains(e.target)) {
          ham.classList.remove('open');
          ham.setAttribute('aria-expanded','false');
          menu.classList.remove('open');
          menu.setAttribute('aria-hidden','true');
        }
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          ham.classList.remove('open');
          ham.setAttribute('aria-expanded','false');
          menu.classList.remove('open');
          menu.setAttribute('aria-hidden','true');
        }
      });
    })();

    // login modal behaviour
    (function(){
      const loginBtn = document.getElementById('loginBtn');
      const modal = document.getElementById('loginModal');
      const loginForm = document.getElementById('loginForm');
      const cancelBtn = document.getElementById('loginCancel');
      const firstInput = document.getElementById('loginUser');
      const forgotBtn = document.getElementById('forgotBtn');

      function openModal() {
        modal.classList.add('open');
        modal.setAttribute('aria-hidden','false');
        // close menu if open
        const ham = document.getElementById('hamburger');
        const menu = document.getElementById('menu');
        if (ham) ham.classList.remove('open');
        if (menu) { menu.classList.remove('open'); menu.setAttribute('aria-hidden','true'); }
        // focus first input after a tick
        setTimeout(() => firstInput.focus(), 50);
        // trap focus basic: listen focus and keydown
        document.addEventListener('focus', trapFocus, true);
        document.addEventListener('keydown', onKeyDown);
      }

      function closeModal() {
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden','true');
        document.removeEventListener('focus', trapFocus, true);
        document.removeEventListener('keydown', onKeyDown);
        // return focus to login button
        loginBtn.focus();
      }

      function trapFocus(e) {
        if (!modal.contains(e.target)) {
          e.stopPropagation();
          firstInput.focus();
        }
      }

      function onKeyDown(e) {
        if (e.key === 'Escape') closeModal();
      }

      // open on click
      loginBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        openModal();
      });

      // close when clicking backdrop (but not modal content)
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });

      cancelBtn.addEventListener('click', (e) => { e.preventDefault(); closeModal(); });

      // fake submit: prevent actual navigation, close modal
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const data = {
          username: loginForm.username.value,
          password: loginForm.password.value,
          remember: !!document.getElementById('loginRemember').checked
        };
        // here you can add validation / send request
        // For now just close modal and log demo data (no sensitive storage)
        closeModal();
        console.log('Login attempt (demo):', data);
      });

      // forgot password button (demo)
      forgotBtn.addEventListener('click', (e) => {
        e.preventDefault();
        alert('Instrukcja odzyskiwania hasła (demo).');
      });
    })();

    // register navigation
    (function(){
      const reg = document.getElementById('registerBtn');
      if (!reg) return;
      reg.addEventListener('click', (e) => {
        e.stopPropagation();
        // close menu if open
        const ham = document.getElementById('hamburger');
        const menu = document.getElementById('menu');
        if (ham) ham.classList.remove('open');
        if (menu) { menu.classList.remove('open'); menu.setAttribute('aria-hidden','true'); }
        // navigate
        setTimeout(() => window.location.href = 'register.html', 60);
      });
    })();
  </script>
</body>
</html>